<!DOCTYPE html><!--TAMWZv1rJ9L760JAn29x0--><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/chunks/5cd79379acc82b6b.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/b21aca2c9ac15a8a.js"/><script src="/_next/static/chunks/a9077698ef76e11f.js" async=""></script><script src="/_next/static/chunks/9111b5fcf0c978a5.js" async=""></script><script src="/_next/static/chunks/7e6ac27ac20c5ced.js" async=""></script><script src="/_next/static/chunks/turbopack-50d90477f30c1568.js" async=""></script><script src="/_next/static/chunks/1af1dd91bd03bb80.js" async=""></script><script src="/_next/static/chunks/cc5639b053815f24.js" async=""></script><script src="/_next/static/chunks/4904848246fadb45.js" async=""></script><title>MyDocs</title><meta name="description" content="A simple SSG blog built with Next.js"/><script src="/_next/static/chunks/a6dad97d9634a72d.js" noModule=""></script></head><body style="background-color:ghostwhite;margin:0;min-height:100vh"><div hidden=""><!--$--><!--/$--></div><header style="padding:1rem 0;margin-bottom:0.25rem"><div style="max-width:1000px;margin:0 auto;padding:0 2rem"><a style="font-size:1.5rem;font-weight:bold;text-decoration:none;color:#333" href="/">MyDocs</a></div></header><article style="max-width:1000px;margin:0 auto;padding:0 2rem 2rem"><h1>docker-composeでRailsとMysqlを使う</h1><div><h2>ディレクトリ構成</h2>
<pre><code class="hljs language-bash">./
├── Dockerfile
├── docker-compose.yml
├── db_volume/
├── mysql-confd/
│   └── default_authentication.cnf
└── src/
    ├── Gemfile
    └── Gemfile.lock
</code></pre>
<h2>ファイルの説明</h2>
<h3>Dockerfile</h3>
<p>Rails のアプリ用の Dockerfile を定義する。
MySQL と連携するために mysql-client をインストールしている。</p>
<pre><code class="hljs language-Dockerfile">FROM ruby:latest

RUN apt-get update -qq &#x26;&#x26; \
    apt-get install -y build-essential &#x26;&#x26; \
    apt-get install -y libpq-dev &#x26;&#x26; \
    apt-get install -y mysql-client &#x26;&#x26; \
    apt-get install -y nodejs

RUN mkdir /myapp
ENV APP_ROOT /myapp
WORKDIR $APP_ROOT
ADD ./src/Gemfile $APP_ROOT/Gemfile
ADD ./src/Gemfile.lock $APP_ROOT/Gemfile.lock

RUN bundle install
ADD ./src/ $APP_ROOT
</code></pre>
<h3>docker-compose</h3>
<p>MySQL のバージョンが 8 以上だと認証でエラーになるので設定ファイルをにマウントする。
また <code>./db_volume:/var/lib/mysql</code> で DB を永続化している。</p>
<p><a href="https://qiita.com/yensaki/items/9e453b7320ca2d0461c7">参考</a></p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:latest</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./mysql-confd:/etc/mysql/conf.d</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./db_volume:/var/lib/mysql</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>

  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">bundle</span> <span class="hljs-string">exec</span> <span class="hljs-string">rails</span> <span class="hljs-string">s</span> <span class="hljs-string">-p</span> <span class="hljs-number">3000</span> <span class="hljs-string">-b</span> <span class="hljs-string">'0.0.0.0'</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./src:/myapp</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3000:3000"</span>
    <span class="hljs-attr">links:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
</code></pre>
<h3>default_authentication.cnf</h3>
<p>認証用の設定ファイル。</p>
<pre><code class="hljs language-default_authentication.cnf">[mysqld]
default_authentication_plugin= mysql_native_password
</code></pre>
<h3>Gemfile</h3>
<pre><code class="hljs language-Gemfile">source 'https://rubygems.org'
gem 'rails', '5.1.6'
</code></pre>
<p>Gemfile.lock も作成しておく ( 中身は空 ) 。</p>
<pre><code class="hljs language-bash">$ <span class="hljs-built_in">touch</span> ./src/Gemfile.lock
</code></pre>
<h2>プロジェクトの構築</h2>
<pre><code class="hljs language-bash">$ docker-compose run web rails new . --force --database=mysql --skip-bundle
</code></pre>
<p><code>--skip-bundle</code> で gem のインストールを回避。
実行後 <code>./src</code> 配下に新しいアプリケーションが作成されている。</p>
<h2>データベースに接続</h2>
<p><code>./src/config/database.yml</code> の password と host を docker-compose で定義した内容に変更。</p>
<pre><code class="hljs language-yaml"><span class="hljs-attr">default:</span> <span class="hljs-meta">&#x26;default</span>
  <span class="hljs-attr">adapter:</span> <span class="hljs-string">mysql2</span>
  <span class="hljs-attr">encoding:</span> <span class="hljs-string">utf8</span>
  <span class="hljs-attr">pool:</span> &#x3C;%=<span class="ruby"> <span class="hljs-variable constant_">ENV</span>.fetch(<span class="hljs-string">"RAILS_MAX_THREADS"</span>) { <span class="hljs-number">5</span> } </span>%>
  <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
  <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
  <span class="hljs-attr">host:</span> <span class="hljs-string">db</span>
</code></pre>
<h2>dockerの起動</h2>
<p>ビルド。</p>
<pre><code class="hljs language-bash">$ docker-compose build
</code></pre>
<p>起動。</p>
<pre><code class="hljs language-bash">$ docker-compose up
</code></pre>
<h2>DBの作成</h2>
<pre><code class="hljs language-bash">$ docker-compose run web rails db:create
</code></pre>
<h2>確認</h2>
<p>ブラウザで localhost:3000 にアクセス。</p>
<p>Rails のコンテナにアクセスして DB との接続確認。</p>
<pre><code class="hljs language-bash">$ docker <span class="hljs-built_in">exec</span> -it コンテナID /bin/bash
</code></pre>
<p>接続したコンテナから DB に接続。</p>
<pre><code class="hljs language-bash">$ rails dbconsole
</code></pre></div></article><!--$--><!--/$--><script src="/_next/static/chunks/b21aca2c9ac15a8a.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[70045,[\"/_next/static/chunks/1af1dd91bd03bb80.js\"],\"\"]\n3:I[56454,[\"/_next/static/chunks/cc5639b053815f24.js\",\"/_next/static/chunks/4904848246fadb45.js\"],\"default\"]\n4:I[10158,[\"/_next/static/chunks/cc5639b053815f24.js\",\"/_next/static/chunks/4904848246fadb45.js\"],\"default\"]\n6:I[25151,[\"/_next/static/chunks/cc5639b053815f24.js\",\"/_next/static/chunks/4904848246fadb45.js\"],\"OutletBoundary\"]\n7:\"$Sreact.suspense\"\n9:I[25151,[\"/_next/static/chunks/cc5639b053815f24.js\",\"/_next/static/chunks/4904848246fadb45.js\"],\"ViewportBoundary\"]\nb:I[25151,[\"/_next/static/chunks/cc5639b053815f24.js\",\"/_next/static/chunks/4904848246fadb45.js\"],\"MetadataBoundary\"]\nd:I[9442,[\"/_next/static/chunks/cc5639b053815f24.js\",\"/_next/static/chunks/4904848246fadb45.js\"],\"default\"]\n:HL[\"/_next/static/chunks/5cd79379acc82b6b.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"TAMWZv1rJ9L760JAn29x0\",\"c\":[\"\",\"docs\",\"20190829090000\"],\"q\":\"\",\"i\":false,\"f\":[[[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"20190829090000\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/chunks/5cd79379acc82b6b.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"script\",\"script-0\",{\"src\":\"/_next/static/chunks/1af1dd91bd03bb80.js\",\"async\":true,\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"ja\",\"children\":[\"$\",\"body\",null,{\"style\":{\"backgroundColor\":\"ghostwhite\",\"margin\":0,\"minHeight\":\"100vh\"},\"children\":[[\"$\",\"header\",null,{\"style\":{\"padding\":\"1rem 0\",\"marginBottom\":\"0.25rem\"},\"children\":[\"$\",\"div\",null,{\"style\":{\"maxWidth\":\"1000px\",\"margin\":\"0 auto\",\"padding\":\"0 2rem\"},\"children\":[\"$\",\"$L2\",null,{\"href\":\"/\",\"style\":{\"fontSize\":\"1.5rem\",\"fontWeight\":\"bold\",\"textDecoration\":\"none\",\"color\":\"#333\"},\"children\":\"MyDocs\"}]}]}],[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.MetadataOutlet\",\"children\":\"$@8\"}]}]]}],{},null,false,false]},null,false,false]},null,false,false]},null,false,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$L9\",null,{\"children\":\"$@a\"}],[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$Lb\",null,{\"children\":[\"$\",\"$7\",null,{\"name\":\"Next.Metadata\",\"children\":\"$@c\"}]}]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$d\",[]],\"S\":true}\n"])</script><script>self.__next_f.push([1,"e:T1596,"])</script><script>self.__next_f.push([1,"\u003ch2\u003eディレクトリ構成\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e./\n├── Dockerfile\n├── docker-compose.yml\n├── db_volume/\n├── mysql-confd/\n│   └── default_authentication.cnf\n└── src/\n    ├── Gemfile\n    └── Gemfile.lock\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eファイルの説明\u003c/h2\u003e\n\u003ch3\u003eDockerfile\u003c/h3\u003e\n\u003cp\u003eRails のアプリ用の Dockerfile を定義する。\nMySQL と連携するために mysql-client をインストールしている。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-Dockerfile\"\u003eFROM ruby:latest\n\nRUN apt-get update -qq \u0026#x26;\u0026#x26; \\\n    apt-get install -y build-essential \u0026#x26;\u0026#x26; \\\n    apt-get install -y libpq-dev \u0026#x26;\u0026#x26; \\\n    apt-get install -y mysql-client \u0026#x26;\u0026#x26; \\\n    apt-get install -y nodejs\n\nRUN mkdir /myapp\nENV APP_ROOT /myapp\nWORKDIR $APP_ROOT\nADD ./src/Gemfile $APP_ROOT/Gemfile\nADD ./src/Gemfile.lock $APP_ROOT/Gemfile.lock\n\nRUN bundle install\nADD ./src/ $APP_ROOT\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003edocker-compose\u003c/h3\u003e\n\u003cp\u003eMySQL のバージョンが 8 以上だと認証でエラーになるので設定ファイルをにマウントする。\nまた \u003ccode\u003e./db_volume:/var/lib/mysql\u003c/code\u003e で DB を永続化している。\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://qiita.com/yensaki/items/9e453b7320ca2d0461c7\"\u003e参考\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003eversion:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'3'\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eservices:\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003edb:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eimage:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emysql:latest\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./mysql-confd:/etc/mysql/conf.d\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./db_volume:/var/lib/mysql\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eenvironment:\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eMYSQL_ROOT_PASSWORD:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eroot\u003c/span\u003e\n      \u003cspan class=\"hljs-attr\"\u003eMYSQL_DATABASE:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eroot\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"3306:3306\"\u003c/span\u003e\n\n  \u003cspan class=\"hljs-attr\"\u003eweb:\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ebuild:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e.\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003ecommand:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003ebundle\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eexec\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003erails\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003es\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e-p\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e3000\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e-b\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'0.0.0.0'\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evolumes:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e./src:/myapp\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eports:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"3000:3000\"\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003elinks:\u003c/span\u003e\n      \u003cspan class=\"hljs-bullet\"\u003e-\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edb\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003edefault_authentication.cnf\u003c/h3\u003e\n\u003cp\u003e認証用の設定ファイル。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-default_authentication.cnf\"\u003e[mysqld]\ndefault_authentication_plugin= mysql_native_password\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eGemfile\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-Gemfile\"\u003esource 'https://rubygems.org'\ngem 'rails', '5.1.6'\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eGemfile.lock も作成しておく ( 中身は空 ) 。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ \u003cspan class=\"hljs-built_in\"\u003etouch\u003c/span\u003e ./src/Gemfile.lock\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eプロジェクトの構築\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ docker-compose run web rails new . --force --database=mysql --skip-bundle\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e--skip-bundle\u003c/code\u003e で gem のインストールを回避。\n実行後 \u003ccode\u003e./src\u003c/code\u003e 配下に新しいアプリケーションが作成されている。\u003c/p\u003e\n\u003ch2\u003eデータベースに接続\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e./src/config/database.yml\u003c/code\u003e の password と host を docker-compose で定義した内容に変更。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-yaml\"\u003e\u003cspan class=\"hljs-attr\"\u003edefault:\u003c/span\u003e \u003cspan class=\"hljs-meta\"\u003e\u0026#x26;default\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eadapter:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003emysql2\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003eencoding:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eutf8\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epool:\u003c/span\u003e \u0026#x3C;%=\u003cspan class=\"ruby\"\u003e \u003cspan class=\"hljs-variable constant_\"\u003eENV\u003c/span\u003e.fetch(\u003cspan class=\"hljs-string\"\u003e\"RAILS_MAX_THREADS\"\u003c/span\u003e) { \u003cspan class=\"hljs-number\"\u003e5\u003c/span\u003e } \u003c/span\u003e%\u003e\n  \u003cspan class=\"hljs-attr\"\u003eusername:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eroot\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epassword:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003eroot\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003ehost:\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003edb\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003edockerの起動\u003c/h2\u003e\n\u003cp\u003eビルド。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ docker-compose build\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e起動。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ docker-compose up\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eDBの作成\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ docker-compose run web rails db:create\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e確認\u003c/h2\u003e\n\u003cp\u003eブラウザで localhost:3000 にアクセス。\u003c/p\u003e\n\u003cp\u003eRails のコンテナにアクセスして DB との接続確認。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ docker \u003cspan class=\"hljs-built_in\"\u003eexec\u003c/span\u003e -it コンテナID /bin/bash\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e接続したコンテナから DB に接続。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e$ rails dbconsole\n\u003c/code\u003e\u003c/pre\u003e"])</script><script>self.__next_f.push([1,"5:[\"$\",\"article\",null,{\"style\":{\"maxWidth\":\"1000px\",\"margin\":\"0 auto\",\"padding\":\"0 2rem 2rem\"},\"children\":[[\"$\",\"h1\",null,{\"children\":\"docker-composeでRailsとMysqlを使う\"}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$e\"}}]]}]\n"])</script><script>self.__next_f.push([1,"a:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"c:[[\"$\",\"title\",\"0\",{\"children\":\"MyDocs\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"A simple SSG blog built with Next.js\"}]]\n8:null\n"])</script></body></html>